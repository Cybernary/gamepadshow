<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
        <title>Gamepad buttons display</title>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <style>
            html, body {
                background-color: transparent;
            }
            #button-X:hover, #button-Y:hover, #button-A:hover, #button-B:hover {
                fill: #17a2b8;
            }

            #joystick-left:hover, #joystick-right:hover {
                fill: #fd7e14;
            }

            #button-start:hover, #button-select:hover {
                fill: #ffc107;
            }

            #arrow-up:hover, #arrow-down:hover, #arrow-left:hover, #arrow-right:hover {
                fill: #42ada9;
            }

            #trigger-L1:hover, #trigger-L2:hover, #trigger-R1:hover, #trigger-R2:hover {
                fill: #e83e8c;
            }

            #button-star:hover, #button-heart:hover {
                fill: #6f42c1;
            }
            #gamepadPrompt, #gamepadDisplay {
                display: none;
            }
        </style>
  </head>
  <body>
      <div class="gamepad"> <!-- Inline SVG, you can change this as you want, as long as you keep the naming or you modify the JS below accordingly -->
          <?xml version="1.0" encoding="UTF-8"?>
<svg width="88.288mm" height="75.376mm" version="1.1" viewBox="0 0 88.288 75.376" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<metadata>
<rdf:RDF>
<cc:Work rdf:about="">
<dc:format>image/svg+xml</dc:format>
<dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
<dc:title/>
</cc:Work>
</rdf:RDF>
</metadata>
<g transform="translate(-37.153 -46.992)">
<g>
<path d="m58.611 47.242c-2.2793 0-5.1033 1.3-6.8887 4.2109l-0.03711 0.06055-0.02734 0.06445c-2.2014 5.0802-3.1695 10.541-4.2246 15.678-5.4582 3.5473-7.9912 9.9617-9.1172 17.008-1.1565 7.2371-0.91371 15.202-0.84375 21.707v6e-3c0.09025 5.7278 1.1154 9.7188 2.7754 12.354s4.0603 3.8598 6.4609 3.7852c4.8012-0.14938 9.3527-4.8453 10.521-10.754 0.42059-2.1262 0.5249-3.7975 1.375-5.5195 0.80617-1.6331 2.4389-3.4616 5.7305-5.7461 1.3856 0.82333 2.9331 1.3418 4.5547 1.3418 3.1095 3e-5 5.9353-1.6502 7.5703-4.2598l4.8359-0.05859 4.8145 0.05859c0.11179 0.17754 0.20419 0.3676 0.33398 0.5332 1.6899 2.338 4.3996 3.7266 7.2852 3.7266 1.6149-2e-5 3.1574-0.51699 4.5391-1.334 3.2861 2.2824 4.9158 4.11 5.7207 5.7422 0.84859 1.7208 0.95273 3.3908 1.373 5.5156 1.1688 5.9086 5.7221 10.605 10.523 10.754 2.4007 0.0747 4.8009-1.1504 6.4609-3.7852s2.6832-6.6257 2.7734-12.354v-6e-3c0.0699-6.4997 0.31169-14.459-0.84179-21.691-1.123-7.0417-3.6465-13.454-9.0918-17.008-1.1268-4.8517-1.8452-11.472-4.2988-15.789l-8e-3 -0.01563-0.01-0.01367c-1.7854-2.9109-4.6094-4.2109-6.8887-4.2109-1.0471 0-1.8664 0.19245-2.5605 0.55859-0.69341 0.36573-1.2288 0.82991-2.0039 1.3945l-2e-3 2e-3c-1.974 1.4203-3.0003 3.9289-3.3359 5.459v2e-3c-0.17054 0.73866-0.28804 2.0983-0.42969 3.709-0.14217 1.6167-0.27329 3.3625-0.34961 4.4102l-0.1582 1.6777h-27.669l-0.26562-2.8359-2e-3 -0.01758c-0.08951-1.1829-0.20706-2.6692-0.32812-3.9766-0.12136-1.3106-0.22032-2.3499-0.36523-2.9746-3.12e-4 -0.0014 3.12e-4 -0.0044 0-0.0059-0.33782-1.531-1.3641-4.0299-3.334-5.4473l-2e-3 -2e-3c-0.77508-0.56462-1.3105-1.0288-2.0039-1.3945-0.53953-0.28457-1.2515-0.36777-1.6736-0.46318z" color="#000000" color-rendering="auto" dominant-baseline="auto" fill="none" image-rendering="auto" shape-rendering="auto" solid-color="#000000" stop-color="#000000" stroke="#916f6f" stroke-width=".5" style="font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;font-variation-settings:normal;inline-size:0;isolation:auto;mix-blend-mode:normal;paint-order:stroke markers fill;shape-margin:0;shape-padding:0;text-decoration-color:#000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal"/>
</g>
<path d="m56.504 65.455c-19.317 1.003-18.199 24.807-18.03 40.505 0.35383 22.456 15.597 16.223 17.777 5.2059 0.81094-4.0996 0.42789-7.1979 7.9571-12.245 1.3629 0.98568 3.002 1.5163 4.684 1.5162 2.9613 3e-5 5.68-1.6374 7.0647-4.255l5.3413-0.06408 5.3661 0.06459c0.14814 0.32142 0.34551 0.63242 0.58084 0.93018 1.5018 2.0872 3.9161 3.3244 6.4875 3.3243 1.6761-1e-5 3.3098-0.52697 4.67-1.5064 7.5142 5.041 7.1323 8.138 7.9427 12.235 2.1792 11.017 17.423 17.25 17.777-5.2059 0.16883-15.698 1.2865-39.502-18.031-40.505z" fill="#c8b7b7"/>
<path d="m53.599 68.085c-4.3486 0.15023-10.811 6.8471-10.811 15.009 1.7e-4 8.3724 6.7874 15.159 15.16 15.159 1.6582-1.22e-4 3.3051-0.27228 4.8752-0.80564-1.1587-1.4007-1.7927-3.1617-1.7927-4.9795 6.6e-5 -4.3144 3.4975-7.8119 7.8119-7.8119 4.3144 7.1e-5 7.8119 3.4975 7.8119 7.8119 1.3e-5 0.58266-0.06516 1.1635-0.1943 1.7317h9.6738c-0.12914-0.56817-0.19432-1.149-0.1943-1.7317 6.6e-5 -4.3144 3.4975-7.8119 7.8119-7.8119 4.3144 7.1e-5 7.8119 3.4975 7.8119 7.8119 2e-5 1.8179-0.63393 3.5788-1.7927 4.9795 1.5701 0.53336 3.217 0.80553 4.8752 0.80564 8.3724 1.19e-4 15.16-6.7869 15.16-15.159 0-8.1623-6.4626-14.859-10.811-15.009zm51.757 0.66404h5.3e-4c7e-3 -2.1e-5 0.0141-2.1e-5 0.0212 0 2.0672-1.11e-4 3.743 1.6757 3.7429 3.7429-1.8e-4 2.067-1.6759 3.7425-3.7429 3.7424-2.0668-1.74e-4 -3.7422-1.6756-3.7424-3.7424-1.5e-4 -2.0586 1.6622-3.7308 3.7207-3.7429zm-50.344 2.5435h4.1078c0.545 2e-6 0.99994 0.45494 0.99994 0.99994v3.5512h3.5507c0.545 0 0.99994 0.45431 0.99994 0.99994v4.1072c-3e-6 0.54562-0.45431 0.99994-0.99994 0.99994h-3.5507v3.5507c0 0.545-0.45431 0.99994-0.99994 0.99994h-4.1078c-0.54563 0-0.99994-0.45431-0.99994-0.99994v-3.5507h-3.5507c-0.54563 0-0.99994-0.45431-0.99994-0.99994v-4.1072c0-0.54563 0.45494-0.99994 0.99994-0.99994h3.5507v-3.5512c0-0.54563 0.45494-0.99994 0.99994-0.99994zm42.936 3.8065h5.29e-4c0.0071-2.1e-5 0.01413-2.1e-5 0.02119 0 2.0672-1.11e-4 3.743 1.6757 3.7429 3.7429-1.8e-4 2.067-1.6759 3.7425-3.7429 3.7424-2.0668-1.74e-4 -3.7422-1.6756-3.7424-3.7424-1.48e-4 -2.0586 1.6622-3.7308 3.7207-3.7429zm15.346 0h5.3e-4c7e-3 -2.1e-5 0.0141-2.1e-5 0.0212 0 2.0672-1.11e-4 3.743 1.6757 3.7429 3.7429-1.8e-4 2.067-1.6759 3.7425-3.7429 3.7424-2.0668-1.74e-4 -3.7422-1.6756-3.7424-3.7424-1.5e-4 -2.0586 1.6622-3.7308 3.7207-3.7429zm-38.779 2.6572h13.113c0.76214 0 1.3761 0.54432 1.3761 1.2211 0 0.67679-0.614 1.2216-1.3761 1.2216h-13.113c-0.76214 0-1.3756-0.54484-1.3756-1.2216 0-0.6768 0.61349-1.2211 1.3756-1.2211zm31.371 3.6928c7e-3 -2.1e-5 0.0141-2.1e-5 0.0212 0 2.0672-1.11e-4 3.743 1.6757 3.7429 3.7429-1.7e-4 2.067-1.6759 3.7425-3.7429 3.7424-2.0668-1.74e-4 -3.7422-1.6756-3.7424-3.7424-1.4e-4 -2.0588 1.6625-3.7311 3.7212-3.7429zm-48.876 9.1214c1.4921-4.8e-5 2.7017 1.2095 2.7016 2.7016 4.8e-5 1.4921-1.2095 2.7017-2.7016 2.7016-1.4919-2.38e-4 -2.7012-1.2098-2.7011-2.7016-4.7e-5 -1.4919 1.2092-2.7014 2.7011-2.7016zm48.683 0c1.4921-4.8e-5 2.7017 1.2095 2.7016 2.7016 4e-5 1.4921-1.2096 2.7017-2.7016 2.7016-1.4919-2.38e-4 -2.7012-1.2098-2.7011-2.7016-5e-5 -1.4919 1.2092-2.7014 2.7011-2.7016z" fill="#e3dbdb" stroke="#916f6f" stroke-linecap="square" stroke-linejoin="round" stroke-width=".05" style="paint-order:markers stroke fill"/>
<circle cx="68.891" cy="92.446" r="5.8276" fill="#6c5353" style="paint-order:markers stroke fill"/>
<circle cx="93.731" cy="92.446" r="5.8276" fill="#6c5353" style="paint-order:markers stroke fill"/>
<circle cx="97.969" cy="78.842" r="3.1636" fill="#c83771" style="paint-order:markers stroke fill" id="button-Y"/>
<path d="m55.012 71.794c-0.277 0-0.50023 0.22271-0.50023 0.49971v4.0514h-4.0509c-0.277 0-0.50023 0.22271-0.50023 0.49971v4.1062c0 0.277 0.22323 0.50023 0.50023 0.50023h4.0509v4.0509c0 0.277 0.22323 0.50023 0.50023 0.50023h4.1062c0.277 0 0.49971-0.22323 0.49971-0.50023v-4.0509h4.0509c0.277 0 0.50023-0.22323 0.50023-0.50023v-4.1062c0-0.277-0.22323-0.49971-0.50023-0.49971h-4.0509v-4.0514c0-0.277-0.22271-0.49971-0.49971-0.49971z" fill="#6c5353" style="paint-order:markers stroke fill"/>
<path d="m74.507 77.925c-0.65693 0-1.1855 0.46928-1.1855 1.0526 0 0.58337 0.52853 1.0532 1.1855 1.0532h13.127c0.65693 0 1.186-0.4698 1.186-1.0532 0-0.58337-0.52904-1.0526-1.186-1.0526z" fill="#e3dedb" style="paint-order:markers stroke fill"/>
<rect x="73.553" y="78.095" width="6.5491" height="1.776" rx="1" ry="1" fill="#6c5353" style="paint-order:markers stroke fill" id="button-select"/>
<rect x="82.019" y="78.095" width="6.5491" height="1.776" rx="1" ry="1" fill="#6c5353" style="paint-order:markers stroke fill" id="button-start"/>
<circle cx="57.01" cy="93.272" r="2.1645" fill="#e3dedb" style="paint-order:markers stroke fill" id="button-star"/>
<circle cx="105.69" cy="93.272" r="2.6166" fill="#ac9393" style="paint-order:markers stroke fill"/>
<circle cx="105.69" cy="93.272" r="2.1645" fill="#e3dedb" style="paint-order:markers stroke fill" id="button-heart"/>
<circle cx="105.38" cy="72.492" r="3.1636" fill="#c83771" style="paint-order:markers stroke fill" id="button-X"/>
<circle cx="105.91" cy="85.192" r="3.1636" fill="#c83771" style="paint-order:markers stroke fill" id="button-B"/>
<circle cx="113.32" cy="78.842" r="3.1636" fill="#c83771" style="paint-order:markers stroke fill" id="button-A"/>
<circle cx="68.891" cy="92.446" r="4.7552" fill="#ac9393" style="paint-order:markers stroke fill" id="joystick-left"/>
<circle cx="93.762" cy="92.446" r="4.7552" fill="#ac9393" style="paint-order:markers stroke fill" id="joystick-right"/>
<path transform="matrix(1.5674 0 0 1.568 -31.954 -53.448)" d="m57.335 94.513-0.59849-0.33481-0.61511 0.30321 0.13348-0.67266-0.47845-0.4913 0.68099-0.08092 0.31941-0.60686 0.28739 0.62266 0.67586 0.11624-0.50337 0.46574z" fill="#c8b7b7" stroke="#916f6f" stroke-linecap="square" stroke-linejoin="round" stroke-width=".031894" style="paint-order:markers stroke fill"/>
<path d="m104.91 91.902-0.1268 0.69017 0.69099 0.12695 0.1268-0.69017zm0.56419 0.81712-0.12679 0.69017 0.69134 0.12701 0.12679-0.69017zm0.69134 0.12701 0.691 0.12695 0.1268-0.69017-0.691-0.12695zm0.691 0.12695-0.1268 0.69017 0.69133 0.12701 0.1268-0.69017zm-0.1268 0.69017-0.69099-0.12695-0.12686 0.69051 0.69099 0.12695zm-0.81785 0.56356-0.69134-0.12701-0.1268 0.69017 0.69134 0.12701zm-0.69134-0.12701 0.12686-0.69051-0.691-0.12695-0.12686 0.69051zm-0.56414-0.81746 0.1268-0.69017-0.69133-0.12701-0.1268 0.69017z" fill="#c8b7b7" style="paint-order:markers stroke fill"/>
<path transform="scale(.26458)" d="m221.53 182.33c-7.1216 0-16.75 4.2202-22.816 14.111-4.6933 7.7362-9.9102 30.813-12.014 40.742-7.2e-4 1.3e-4 -0.0527 8e-3 -0.0527 8e-3 -0.65941 3.0992-2.4961 11.49-2.4961 11.49 20.484-10.06 42.427-7.7657 66.723-7.0059 0 0-0.0741-1.5518-0.27148-3.7676-0.56123-7.7253-1.9992-26.677-2.8945-30.521-1.055-4.8137-5.078-14.044-11.145-18.396-6.0665-4.418-7.9116-6.6602-15.033-6.6602z" fill="#c8b7b7" id="trigger-L2"/>
<path d="m48.504 67.139 0.18053-0.97868c1.5331-0.97487 3.7482-1.6854 6.6538-2.0061 3.323-0.36679 7.4663-0.16894 11.045 0l0.08061 1.0036c-3.1349-0.27659-7.7994-0.32295-11.464 0-2.4057 0.212-4.3087 0.86833-6.496 1.9812z" fill="#e3dbdb" id="trigger-L1"/>
<path transform="scale(.26458)" d="m393 182.33c-7.1216 0-8.9666 2.2421-15.033 6.6602-6.0665 4.3521-10.089 13.583-11.145 18.396-0.89537 3.8448-2.3333 22.796-2.8945 30.521-0.1974 2.2158-0.27148 3.7676-0.27148 3.7676 24.296-0.75986 46.237-3.0543 66.721 7.0059 0 0-1.8347-8.391-2.4941-11.49 0 0-0.052-8e-3 -0.0527-8e-3 -2.1035-9.9289-7.3204-33.006-12.014-40.742-6.0666-9.8911-15.695-14.111-22.816-14.111z" fill="#c8b7b7" id="trigger-R2"/>
<path d="m114.09 67.139-0.18053-0.97868c-1.5331-0.97487-3.7482-1.6854-6.6538-2.0061-3.323-0.36679-7.4663-0.16894-11.045 0l-0.08061 1.0036c3.1349-0.27659 7.7994-0.32295 11.464 0 2.4057 0.212 4.3087 0.86833 6.496 1.9812z" fill="#e3dbdb" id="trigger-R1"/>
<path d="m56.364 71.066h1.4015l-0.70077-1.2748z" fill="#c8b7b7" style="paint-order:markers stroke fill"/>
<path d="m56.364 86.73h1.4015l-0.70077 1.2748z" fill="#c8b7b7" style="paint-order:markers stroke fill"/>
<path d="m64.897 78.197v1.4015l1.2748-0.70077z" fill="#c8b7b7" style="paint-order:markers stroke fill"/>
<path d="m49.233 78.197v1.4015l-1.2748-0.70077z" fill="#c8b7b7" style="paint-order:markers stroke fill"/>
<path d="m55.383 72.425c-0.13296 0-0.23978 0.10682-0.23978 0.23978v0.37827c0 0.13296 0.10682 0.23978 0.23978 0.23978h3.3647c0.13296 0 0.23978-0.10682 0.23978-0.23978v-0.37827c0-0.13296-0.10682-0.23978-0.23978-0.23978zm0.42333 1.0162c-0.13296 0-0.23978 0.10723-0.23978 0.24019v0.37827c0 0.13296 0.10682 0.23978 0.23978 0.23978h2.5181c0.13296 0 0.23978-0.10682 0.23978-0.23978v-0.37827c0-0.13296-0.10682-0.24019-0.23978-0.24019zm0 1.0166c-0.13296 0-0.23978 0.10723-0.23978 0.24019v0.37786c0 0.13296 0.10682 0.24019 0.23978 0.24019h2.5181c0.13296 0 0.23978-0.10723 0.23978-0.24019v-0.37786c0-0.13296-0.10682-0.24019-0.23978-0.24019z" fill="#916f6f" style="paint-order:markers stroke fill" id="arrow-up"/>
<path d="m55.383 85.37c-0.13296 0-0.23978-0.10682-0.23978-0.23978v-0.37827c0-0.13296 0.10682-0.23978 0.23978-0.23978h3.3647c0.13296 0 0.23978 0.10682 0.23978 0.23978v0.37827c0 0.13296-0.10682 0.23978-0.23978 0.23978zm0.42333-1.0162c-0.13296 0-0.23978-0.10723-0.23978-0.24019v-0.37827c0-0.13296 0.10682-0.23978 0.23978-0.23978h2.5181c0.13296 0 0.23978 0.10682 0.23978 0.23978v0.37827c0 0.13296-0.10682 0.24019-0.23978 0.24019zm0-1.0166c-0.13296 0-0.23978-0.10723-0.23978-0.24019v-0.37786c0-0.13296 0.10682-0.24019 0.23978-0.24019h2.5181c0.13296 0 0.23978 0.10723 0.23978 0.24019v0.37786c0 0.13296-0.10682 0.24019-0.23978 0.24019z" fill="#916f6f" style="paint-order:markers stroke fill"  id="arrow-down"/>
<path d="m63.538 77.215c0-0.13296-0.10682-0.23978-0.23978-0.23978h-0.37827c-0.13296 0-0.23978 0.10682-0.23978 0.23978v3.3647c0 0.13296 0.10682 0.23978 0.23978 0.23978h0.37827c0.13296 0 0.23978-0.10682 0.23978-0.23978zm-1.0162 0.42333c0-0.13296-0.10723-0.23978-0.24019-0.23978h-0.37827c-0.13296 0-0.23978 0.10682-0.23978 0.23978v2.5181c0 0.13296 0.10682 0.23978 0.23978 0.23978h0.37827c0.13296 0 0.24019-0.10682 0.24019-0.23978zm-1.0166 0c0-0.13296-0.10723-0.23978-0.24019-0.23978h-0.37786c-0.13296 0-0.24019 0.10682-0.24019 0.23978v2.5181c0 0.13296 0.10723 0.23978 0.24019 0.23978h0.37786c0.13296 0 0.24019-0.10682 0.24019-0.23978z" fill="#916f6f" style="paint-order:markers stroke fill"  id="arrow-right"/>
<path d="m50.593 77.215c0-0.13296 0.10682-0.23978 0.23978-0.23978h0.37827c0.13296 0 0.23978 0.10682 0.23978 0.23978v3.3647c0 0.13296-0.10682 0.23978-0.23978 0.23978h-0.37827c-0.13296 0-0.23978-0.10682-0.23978-0.23978zm1.0162 0.42333c0-0.13296 0.10723-0.23978 0.24019-0.23978h0.37827c0.13296 0 0.23978 0.10682 0.23978 0.23978v2.5181c0 0.13296-0.10682 0.23978-0.23978 0.23978h-0.37827c-0.13296 0-0.24019-0.10682-0.24019-0.23978zm1.0166 0c0-0.13296 0.10723-0.23978 0.24019-0.23978h0.37786c0.13296 0 0.24019 0.10682 0.24019 0.23978v2.5181c0 0.13296-0.10723 0.23978-0.24019 0.23978h-0.37786c-0.13296 0-0.24019-0.10682-0.24019-0.23978z" fill="#916f6f" style="paint-order:markers stroke fill"  id="arrow-left"/>
</g>
</svg>
      </div>
      
<div id="gamepadPrompt"></div>
<div id="gamepadDisplay"></div>
 
    <script>
/*******************************************************************************************************************/
/*        CONFIGURATION                                                                                            */ 
/*******************************************************************************************************************/
    /* Element ID, color on press, original color */    
    var padButtons = [
        ["button-B","#fff","#c83771"],
        ["button-A","#fff","#c83771"],
        ["button-Y","#fff","#c83771"],
        ["button-X","#fff","#c83771"],
        ["trigger-L1","#c83771","#e3dbdb"],
        ["trigger-R1","#c83771","#e3dbdb"],
        ["trigger-L2","#c83771","#c8b7b7"],
        ["trigger-R2","#c83771","#c8b7b7"],
        ["button-select","#c83771","#6c5353"],
        ["button-start","#c83771","#6c5353"],
        ["joystick-left","#fff","#ac9393"],
        ["joystick-right","#fff","#ac9393"],
        ["arrow-up","#fff","#916f6f"],
        ["arrow-down","#fff","#916f6f"],
        ["arrow-left","#fff","#916f6f"],
        ["arrow-right","#fff","#916f6f"]
    ];
    
    var limit = 2; // Range from circle center to outer limit
    var speed = 2; // Multiplier for joystick speed
/*******************************************************************************************************************/        
    var hasGP = false;
    var repGP;
    var iniCXLeft = document.getElementById("joystick-left").getAttribute("cx"); // Starting CX attribute value for left joystick
    var iniCYLeft = document.getElementById("joystick-left").getAttribute("cy"); // Starting CY attribute value for left joystick
    var iniCXRight = document.getElementById("joystick-right").getAttribute("cx"); // Starting CX attribute value for right joystick
    var iniCYRight = document.getElementById("joystick-right").getAttribute("cy"); // Starting CY attribute value for right joystick
    var startXLeft = 0;
    var startYLeft = 0;
    var startXRight = 0;
    var startYRight = 0;
    var gp;
 
    function canGame() {
        return "getGamepads" in navigator;
    }
 
    function reportOnGamepad() {
        gp = navigator.getGamepads()[0];
        var html = "";
            html += "id: "+gp.id+"<br/>";
        
        for(var i=0;i<gp.buttons.length-1;i++) {
            html+= "Button "+(i+1)+": ";            
            
            if (gp.buttons[i].pressed) {
                html+= i + " pressed";
                document.getElementById(padButtons[i][0]).setAttribute("fill", padButtons[i][1]);    
            }
            else {
                document.getElementById(padButtons[i][0]).setAttribute("fill", padButtons[i][2]);  
            }
            
            /* Buttons debug */
            /* Comment IF above and uncomment IF below */
            
            /*if (gp.buttons[i].pressed) html+= i + " pressed";
            html+= "<br/>";*/
        }

        for(var i=0;i<gp.axes.length; i+=2) {
            html+= "Stick "+i+": "+gp.axes[i]+","+gp.axes[i+1]+"<br/>";
            if (i <= 1) {
                pad = "joystick-left";
                position = 10;
                iniCX = iniCXLeft;
                iniCY = iniCYLeft;
                startX = startXLeft;
                startY = startYLeft;
            }
            else if (i>1 && i<=3) {
                pad = "joystick-right";
                position = 11;
                iniCX = iniCXRight;
                iniCY = iniCYRight;
                startX = startXRight;
                startY = startYRight;
            }
            if (gp.axes[i] != startX) {
                topLimit = ~~Math.abs(parseFloat(document.getElementById(pad).getAttribute("cx"))+parseFloat(gp.axes[i])) <= ~~Math.abs(parseFloat(iniCX))+ limit;
                bottomLimit = ~~Math.abs(parseFloat(document.getElementById(pad).getAttribute("cx"))+parseFloat(gp.axes[i])) >= ~~Math.abs(parseFloat(iniCX))- limit;
                if (topLimit && bottomLimit) {
                    document.getElementById(pad).setAttribute("cx", parseFloat(document.getElementById(pad).getAttribute("cx"))+parseFloat(gp.axes[i])*speed);
                }   
            }
            else {
                document.getElementById(pad).setAttribute("cx", iniCX);
            }
            
            if (gp.axes[i+1] != startY) {
                topLimit = Math.abs(parseFloat(document.getElementById(pad).getAttribute("cy"))+parseFloat(gp.axes[i+1])) <= Math.abs(parseFloat(iniCY))+ limit;
                bottomLimit = Math.abs(parseFloat(document.getElementById(pad).getAttribute("cy"))+parseFloat(gp.axes[i+1])) >= Math.abs(parseFloat(iniCY))- limit;
                if (topLimit && bottomLimit) {
                    document.getElementById(pad).setAttribute("cy", parseFloat(document.getElementById(pad).getAttribute("cy"))+parseFloat(gp.axes[i+1])*speed);
                }   
            }
            else {
                document.getElementById(pad).setAttribute("cy", iniCY);
            }
        }
 
        $("#gamepadDisplay").html(html);
    }
 
    $(document).ready(function() {
 
        if(canGame()) {
            gp = navigator.getGamepads()[0];
 
            var prompt = "To begin using your gamepad, connect it and press any button!";
            $("#gamepadPrompt").text(prompt);
 
            $(window).on("gamepadconnected", function() {
                hasGP = true;
                $("#gamepadPrompt").html("Gamepad connected!");
                console.log("connection event");
                repGP = window.setInterval(reportOnGamepad,100);
                gp = navigator.getGamepads()[0];
                startXLeft = gp.axes[0];
                startYLeft = gp.axes[1];
                startXRight = gp.axes[2];
                startYRight = gp.axes[3];
            });
 
            $(window).on("gamepaddisconnected", function() {
                console.log("disconnection event");
                $("#gamepadPrompt").text(prompt);
                window.clearInterval(repGP);
            });
 
            //setup an interval for Chrome
            var checkGP = window.setInterval(function() {
                console.log('checkGP');
                if(navigator.getGamepads()[0]) {
                    if(!hasGP) $(window).trigger("gamepadconnected");
                    window.clearInterval(checkGP);
                }
            }, 100);
        }
 
    });
    </script>
  </body>
</html>
